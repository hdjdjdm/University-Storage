/* 4.3.2. Выведите три действительных числа: средний балл всех учащихся по математике, по физике,
по информатике. Определите учащихся с наилучшей успеваемостью, то есть с максимальным средним
баллом по трём предметам. Выведите в файл out.txt одного или нескольких учащихся, имеющих
максимальный средний балл. */

using System;
using System.Text;
using System.IO;
using System.Linq;

namespace Lr4
{
    class Num3
    {
        static void Main()
        {
            //Вариант
            int variant = (14 - 1) % 3 + 1; // = 2
            Console.WriteLine($"Вариант {variant}\n");

            //Файл
            string inp = "in.txt", outp = "out.txt";
            string[] lines = File.ReadAllLines(inp);

            //Текст из файла
            int n = Convert.ToInt32(lines[0]);
            string[] names = new string[n];
            int[,] grades = new int[n, 3];
            for (int i = 0; i < n; i++)
            {
                string[] parts = lines[i + 1].Split();
                names[i] = parts[0] + " " + parts[1];
                grades[i, 0] = Convert.ToInt32(parts[2]);
                grades[i, 1] = Convert.ToInt32(parts[3]);
                grades[i, 2] = Convert.ToInt32(parts[4]);
            }

            //Средний балл по каждому предмету
            double[] avgGrades = new double[3];
            for (int j = 0; j < 3; j++)
            {
                double sum = 0;
                for (int i = 0; i < n; i++)
                {
                    sum += grades[i, j];
                }
                avgGrades[j] = sum / n;
            }

            //Средний балл каждого студента
            double[] avgStudentGrades = new double[n];
            for (int i = 0; i < n; i++)
            {
                double sum = 0;
                for (int j = 0; j < 3; j++)
                {
                    sum += grades[i, j];
                }
                avgStudentGrades[i] = sum / 3;
            }

            //Ученики с максимальным среднем баллом
            double MaxStudentGrade = avgStudentGrades.Max();
            string bestStudents = "";
            for (int i = 0; i < n; i++)
            {
                if (avgStudentGrades[i] == MaxStudentGrade)
                {
                    bestStudents += $"{names[i]}, ";
                }
            }


            string result = $"{avgGrades[0]} {avgGrades[1]} {avgGrades[2]}\n{bestStudents}";

            File.WriteAllText(outp, result);
        }
    }
}
